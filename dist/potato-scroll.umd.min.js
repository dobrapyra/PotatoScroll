/**
 * PotatoScroll
 * author: dobrapyra (Michał Zieliński)
 * version "0.6.2"
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PotatoScroll",[],t):"object"==typeof exports?exports.PotatoScroll=t():e.PotatoScroll=t()}(window,(function(){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function i(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}o.r(t),o.d(t,"default",(function(){return l}));var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.preinit(t)&&(this.bindThis(),this.initialize())}return s(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.selector;return Array.prototype.map.call(document.querySelectorAll(o),(function(o){var i=Object(t);return i.el=o,new e(i)}))}}]),s(e,[{key:"preinit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(){},o=e.el,i=e.maskEl,s=void 0===i?null:i,l=e.scrollEl,n=void 0===l?null:l,r=e.cssClass,a=void 0===r?"potatoScroll":r,c=e.forceCustom,h=void 0!==c&&c,v=e.forceSize,u=void 0===v?20:v,d=e.withArrows,f=void 0!==d&&d,p=e.arrowMove,m=void 0===p?40:p,E=e.onNativeScroll,k=void 0===E?t:E,y=e.onScroll,b=void 0===y?t:y,w=e.onTop,S=void 0===w?t:w,g=e.onBottom,C=void 0===g?t:g,z=e.onLeft,L=void 0===z?t:z,B=e.onRight,M=void 0===B?t:B;return!!o&&(this.rootEl=o,this.ownMaskEl=s,this.ownScrollEl=n,this.cssClass=a,this.forceCustom=h,this.forceSize=u,this.withArrows=f,this.arrowMove=m,this.event={onNativeScroll:k,onScroll:b,onTop:S,onBottom:C,onLeft:L,onRight:M},this.ownTree=null!==this.ownMaskEl&&null!==this.ownScrollEl,this.resetState(),!0)}},{key:"resetState",value:function(){var e=this.forceCustom,t=this.forceSize;this.wait={scroll:!1,resize:!1},this.raf={scroll:null,resize:null},this.progress={v:null,h:null},this.bar={v:{forceSize:e?t:0,nativeSize:0,el:null,trackEl:null,moveStart:null,moveDiff:0,scrollBefore:null,size:0,sizeFract:1,trackSize:0,moveProp:"clientY",scrollProp:"scrollTop",lengthProp:"scrollHeight",measureProp:"offsetHeight",sizeProp:"height",forceMulti:1,axis:"Y"},h:{forceSize:e?t:0,nativeSize:0,el:null,trackEl:null,moveStart:null,moveDiff:0,scrollBefore:null,size:0,sizeFract:1,trackSize:0,moveProp:"clientX",scrollProp:"scrollLeft",lengthProp:"scrollWidth",measureProp:"offsetWidth",sizeProp:"width",forceMulti:2,axis:"X"}},this.activeBarObj=null,this.arrow={t:{el:null,disabled:!1},b:{el:null,disabled:!1},l:{el:null,disabled:!1},r:{el:null,disabled:!1}},this.isRTL=!1}},{key:"bindThis",value:function(){this.onScrollThrottle=this.onScrollThrottle.bind(this),this.onScroll=this.onScroll.bind(this),this.onResizeThrottle=this.onResizeThrottle.bind(this),this.onResize=this.onResize.bind(this),this.onNestedChange=this.onNestedChange.bind(this),this.refreshParents=this.refreshParents.bind(this),this.onDocMouseMove=this.onDocMouseMove.bind(this),this.onDocMouseUp=this.onDocMouseUp.bind(this),this.onDocMouseLeave=this.onDocMouseLeave.bind(this),this.onVBarMouseDown=this.onVBarMouseDown.bind(this),this.onHBarMouseDown=this.onHBarMouseDown.bind(this),this.onTClick=this.onTClick.bind(this),this.onBClick=this.onBClick.bind(this),this.onLClick=this.onLClick.bind(this),this.onRClick=this.onRClick.bind(this)}},{key:"initialize",value:function(){this.destroy(),this.analyzeNative(),this.prepareDOM(),this.hideNativeBars(),this.addCustomBars(),this.bindEvents(),this.bindBarsEvents(),this.bindArrowsEvents(),this.refresh(),setTimeout(this.refreshParents)}},{key:"analyzeNative",value:function(){var e=this.rootEl,t=this.bar,o=e.parentElement,i=document.createElement("div"),s=i.style;s.overflow="scroll",s.width="100px",s.height="100px",s.position="absolute",s.top=0,s.left=0,s.visibility="hidden",s.opacity=0,o.appendChild(i);var l=i.offsetWidth-i.scrollWidth,n=i.offsetHeight-i.scrollHeight;if(t.v.nativeSize=l,t.h.nativeSize=n,l>0&&(t.v.forceSize=0),n>0&&(t.h.forceSize=0),l>0){var r=document.createElement("div");i.appendChild(r);var a=r.getBoundingClientRect().left,c=i.getBoundingClientRect().left;this.isRTL=l>0&&a>c,i.removeChild(r)}o.removeChild(i),this.isIE=/Trident\/.*rv:11|MSIE /.test(window.navigator.userAgent),this.isIEandRTL=this.isIE&&this.isRTL}},{key:"prepareDOM",value:function(){var e=this.rootEl,t=this.cssClass;this.ownTree||e.classList.add(t);var o=e.style;o.overflow="visible",o.position="relative",o.display="flex";var i=this.ownTree?this.ownMaskEl:document.createElement("div");this.ownTree||i.classList.add("".concat(t,"__mask"));var s=i.style;s.flexGrow=1,s.overflow="hidden",s.position="relative",s.display="flex",s.zIndex="0";var l=this.ownTree?this.ownScrollEl:document.createElement("div");this.ownTree||l.classList.add("".concat(t,"__scroll"));var n=l.style;if(n.flexGrow=1,n.overflow="scroll",!this.ownTree){for(;e.childNodes.length;)l.appendChild(e.childNodes[0]);i.appendChild(l),e.appendChild(i)}this.maskEl=i,this.scrollEl=l}},{key:"hideNativeBars",value:function(){var e=this.scrollEl,t=this.bar;if(this.forceCustom&&(0===t.v.nativeSize||0===t.h.nativeSize)){var o=t.v.forceSize;e.style.marginLeft="".concat(-o,"px"),e.style.paddingLeft="".concat(o,"px"),e.style.marginRight="".concat(-o,"px"),e.style.paddingRight="".concat(o,"px");var i=t.v.forceSize;return e.style.marginBottom="".concat(-i,"px"),void(e.style.paddingBottom="".concat(i,"px"))}this.isRTL?e.style.marginLeft="".concat(-t.h.nativeSize,"px"):e.style.marginRight="".concat(-t.h.nativeSize,"px"),e.style.marginBottom="".concat(-t.v.nativeSize,"px")}},{key:"addCustomBars",value:function(){var e=this.bar,t=this.rootEl;if(0!==e.v.nativeSize||0!==e.h.nativeSize||this.forceCustom){var o=this.createTrackEl("v"),i=this.createBarEl("v"),s=this.createTrackEl("h"),l=this.createBarEl("h");this.withArrows&&this.addCustomArrows(),o.appendChild(i),s.appendChild(l),t.appendChild(o),t.appendChild(s)}}},{key:"createTrackEl",value:function(e){var t=this.cssClass,o=this.bar,i=document.createElement("div");return i.classList.add("".concat(t,"__track")),i.classList.add("".concat(t,"__track--").concat(e)),i.style.position="absolute",i.style.zIndex="1",o[e].trackEl=i,i}},{key:"createBarEl",value:function(e){var t=this.cssClass,o=this.bar,i=document.createElement("div");return i.classList.add("".concat(t,"__bar")),i.classList.add("".concat(t,"__bar--").concat(e)),o[e].el=i,i}},{key:"addCustomArrows",value:function(){var e=this.bar,t=this.rootEl,o=this.cssClass;t.classList.add("".concat(o,"--arrows"));var i=this.createArrowEl("t"),s=this.createArrowEl("b"),l=this.createArrowEl("l"),n=this.createArrowEl("r");e.v.trackEl.appendChild(i),e.v.trackEl.appendChild(s),e.h.trackEl.appendChild(l),e.h.trackEl.appendChild(n)}},{key:"createArrowEl",value:function(e){var t=this.cssClass,o=this.arrow,i=document.createElement("div");return i.classList.add("".concat(t,"__arrow")),i.classList.add("".concat(t,"__arrow--").concat(e)),i.style.position="absolute",i.style.zIndex="1",o[e].el=i,i}},{key:"bindEvents",value:function(){this.scrollEl&&this.scrollEl.addEventListener("scroll",this.onScrollThrottle),window.addEventListener("resize",this.onResizeThrottle),this.rootEl.addEventListener("PotatoScroll.nestedChange",this.onNestedChange)}},{key:"unbindEvents",value:function(){this.scrollEl&&this.scrollEl.removeEventListener("scroll",this.onScrollThrottle),window.removeEventListener("resize",this.onResizeThrottle),this.rootEl.removeEventListener("PotatoScroll.nestedChange",this.onNestedChange)}},{key:"onScrollThrottle",value:function(e){this.event.onNativeScroll(e,this.rootEl),this.wait.scroll||(this.wait.scroll=!0,this.raf.scroll=requestAnimationFrame(this.onScroll))}},{key:"onScroll",value:function(){this.setBarsPos(),this.wait.scroll=!1}},{key:"onResizeThrottle",value:function(){this.wait.resize||(this.wait.resize=!0,this.raf.resize=requestAnimationFrame(this.onResize))}},{key:"onResize",value:function(){this.refresh(),this.wait.resize=!1}},{key:"onNestedChange",value:function(){this.refresh()}},{key:"bindBarsEvents",value:function(){var e=this.bar;e.v.el&&e.v.el.addEventListener("mousedown",this.onVBarMouseDown),e.h.el&&e.h.el.addEventListener("mousedown",this.onHBarMouseDown)}},{key:"unbindBarsEvents",value:function(){var e=this.bar;e.v.el&&e.v.el.removeEventListener("mousedown",this.onVBarMouseDown),e.h.el&&e.h.el.removeEventListener("mousedown",this.onHBarMouseDown)}},{key:"bindDocEvents",value:function(){document.addEventListener("mousemove",this.onDocMouseMove),document.addEventListener("mouseup",this.onDocMouseUp),document.addEventListener("mouseleave",this.onDocMouseLeave)}},{key:"unbindDocEvents",value:function(){document.removeEventListener("mousemove",this.onDocMouseMove),document.removeEventListener("mouseup",this.onDocMouseUp),document.removeEventListener("mouseleave",this.onDocMouseLeave)}},{key:"onVBarMouseDown",value:function(e){e.preventDefault(),this.activeBarObj=this.bar.v,this.moveBegin(e)}},{key:"onHBarMouseDown",value:function(e){e.preventDefault(),this.activeBarObj=this.bar.h,this.moveBegin(e)}},{key:"onDocMouseMove",value:function(e){this.moveUpdate(e)}},{key:"onDocMouseUp",value:function(e){this.moveEnd(e)}},{key:"onDocMouseLeave",value:function(e){this.moveEnd(e)}},{key:"getMoveValue",value:function(e,t){return"Y"!==t.axis&&this.isRTL&&this.isIE?t.scrollRange-e[t.moveProp]:e[t.moveProp]}},{key:"moveBegin",value:function(e){var t=this.activeBarObj,o=this.scrollEl;null!==t&&(o.style.userSelect="none",o.style.pointerEvents="none",this.bindDocEvents(),t.moveStart=this.getMoveValue(e,t),t.scrollBefore=o[t.scrollProp])}},{key:"moveUpdate",value:function(e){var t=this.activeBarObj;null!==t&&(t.moveDiff=this.getMoveValue(e,t)-t.moveStart,this.barMoveToScroll(t))}},{key:"moveEnd",value:function(){var e=this.activeBarObj,t=this.scrollEl;null!==e&&(this.unbindDocEvents(),e.moveStart=null,e.moveDiff=0,e.scrollBefore=null,this.activeBarObj=null,t.style.userSelect="",t.style.pointerEvents="")}},{key:"bindArrowsEvents",value:function(){var e=this.arrow;e.t.el&&e.t.el.addEventListener("click",this.onTClick),e.b.el&&e.b.el.addEventListener("click",this.onBClick),e.l.el&&e.l.el.addEventListener("click",this.onLClick),e.r.el&&e.r.el.addEventListener("click",this.onRClick)}},{key:"unbindArrowsEvents",value:function(){var e=this.arrow;e.t.el&&e.t.el.removeEventListener("click",this.onTClick),e.b.el&&e.b.el.removeEventListener("click",this.onBClick),e.l.el&&e.l.el.removeEventListener("click",this.onLClick),e.r.el&&e.r.el.removeEventListener("click",this.onRClick)}},{key:"onTClick",value:function(){this.smoothScrollTo("scrollTop",-this.arrowMove)}},{key:"onBClick",value:function(){this.smoothScrollTo("scrollTop",this.arrowMove)}},{key:"onLClick",value:function(){this.smoothScrollTo("scrollLeft",-this.arrowMove)}},{key:"onRClick",value:function(){this.smoothScrollTo("scrollLeft",this.arrowMove)}},{key:"smoothScrollTo",value:function(e,t){var o=this.scrollEl;o.style.scrollBehavior="smooth",o[e]+=t,o.style.scrollBehavior=""}},{key:"setBarsSize",value:function(){var e=this.bar;this.setBarSize(e.v),this.setBarSize(e.h)}},{key:"setBarSize",value:function(e){var t=this.scrollEl,o=this.maskEl,i=t[e.lengthProp]-e.forceSize*e.forceMulti,s=o[e.measureProp];if(e.scrollRange=i-s,e.el){var l=s/i,n=e.trackEl[e.measureProp];e.sizeFract=l,e.trackSize=n,e.trackEl.style.display=1===e.sizeFract?"none":"",e.el.style[e.sizeProp]="".concat(l*n,"px"),e.moveRange=n-e.el[e.measureProp]}}},{key:"setBarsPos",value:function(){var e=this.bar,t=this.event,o=this.rootEl,i=this.arrow,s={v:0,h:0};e.v.el&&(s.v=this.setBarPos(e.v)),e.h.el&&(s.h=this.setBarPos(e.h)),t.onScroll(s,o),this.axisEdges(s,"v",i.t,i.b),this.axisEdges(s,"h",i.l,i.r)}},{key:"getScrollValue",value:function(e){return"Y"!==e.axis&&e.scrollRange&&this.isRTL?this.isIE?e.scrollRange-this.scrollEl[e.scrollProp]:this.scrollEl[e.scrollProp]+e.scrollRange:this.scrollEl[e.scrollProp]}},{key:"setBarPos",value:function(e){var t=this.getScrollValue(e),o=e.scrollRange?t/e.scrollRange:0;if(e.el){var i=o*(e.trackSize*(1-e.sizeFract));e.el.style.transform="translate".concat(e.axis,"(").concat(i,"px)")}return o}},{key:"axisEdges",value:function(e,t,o,i){var s=this.progress,l=this.event,n=this.rootEl;if(e[t]!==s[t]){s[t]=e[t];var r=e[t]<=0;r&&l.onLeft(n),o.el&&this.setArrowIf(o,r);var a=e[t]>=1;a&&l.onRight(n),i.el&&this.setArrowIf(i,a)}}},{key:"setArrowIf",value:function(e,t){var o=this.cssClass;if(e.disabled!==t){e.disabled=t;var i="".concat(o,"__arrow--disabled");t?e.el.classList.add(i):e.el.classList.remove(i)}}},{key:"barMoveToScroll",value:function(e){this.scrollEl[e.scrollProp]=e.scrollBefore+e.scrollRange*e.moveDiff/e.moveRange}},{key:"refreshParents",value:function(){window.CustomEvent&&this.rootEl.parentElement.dispatchEvent(new CustomEvent("PotatoScroll.nestedChange",{bubbles:!0}))}},{key:"refresh",value:function(){this.setBarsSize(),this.setBarsPos()}},{key:"destroy",value:function(){var e=this.scrollEl,t=this.maskEl,o=this.rootEl,i=this.bar,s=this.arrow,l=this.cssClass;this.unbindArrowsEvents(),this.unbindDocEvents(),this.unbindBarsEvents(),this.unbindEvents(),i.v.trackEl&&(o.removeChild(i.v.trackEl),i.v.el=null,i.v.trackEl=null,s.t.el=null,s.b.el=null),i.h.trackEl&&(o.removeChild(i.h.trackEl),i.h.el=null,i.h.trackEl=null,s.l.el=null,s.r.el=null),this.ownTree||o.classList.remove(l);var n=o.style;if(n.overflow="",n.position="",n.display="",!this.ownTree){if(e){for(;e.childNodes.length;)o.appendChild(e.childNodes[0]);t&&t.removeChild(e)}t&&o.removeChild(t)}e&&(this.scrollEl=null),t&&(this.maskEl=null),this.resetState(),setTimeout(this.refreshParents)}}]),e}()}]).default}));